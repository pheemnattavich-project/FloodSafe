<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<title>р╕Вр╕нр╕Др╕зр╕▓р╕бр╕Кр╣Ир╕зр╕вр╣Ар╕лр╕ер╕╖р╕н</title>

<!-- LIFF SDK -->
<script src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>
</head>

<body>

<h2>ЁЯЖШ р╕Вр╕нр╕Др╕зр╕▓р╕бр╕Кр╣Ир╕зр╕вр╣Ар╕лр╕ер╕╖р╕н</h2>

<form onsubmit="sendData(event)">
  <input type="text" id="name" placeholder="р╕Кр╕╖р╣Ир╕нр╕Ьр╕╣р╣Йр╣Бр╕Ир╣Йр╕З" required><br><br>
  <textarea id="detail" placeholder="р╕гр╕▓р╕вр╕ер╕░р╣Ар╕нр╕╡р╕вр╕Ф" required></textarea><br><br>
  <button type="submit">ЁЯУд р╕кр╣Ир╕Зр╕Вр╣Йр╕нр╕бр╕╣р╕е</button>
</form>

<button onclick="backToLine()">тмЕ р╕Бр╕ер╕▒р╕Ър╣Ар╕Вр╣Йр╕▓ LINE</button>

<script>
async function init() {
  await liff.init({ liffId: "LIFF_ID_р╕Вр╕нр╕Зр╕Др╕╕р╕У" });
}
init();

function sendData(e){
  e.preventDefault();

  fetch("https://script.google.com/macros/s/AKfycbwlKjkkCcyCdqktuUHTvduPeFUmVE9-Tb8E61LRNg79pGLO0rlObaJNXsGh9iMydZVISQ/exec",{
    method: "POST",
    headers: {
      "Content-Type": "application/json"
    },
    body: JSON.stringify({
      name: document.getElementById("name").value,
      detail: document.getElementById("detail").value
    })
  })
  .then(res => res.text())
  .then(() => {
    alert("р╕кр╣Ир╕Зр╕Вр╣Йр╕нр╕бр╕╣р╕ер╣Ар╕гр╕╡р╕вр╕Ър╕гр╣Йр╕нр╕вр╣Бр╕ер╣Йр╕з тЬЕ");
    liff.closeWindow();   // р╕Бр╕ер╕▒р╕Ъ LINE
  })
  .catch(err => {
    alert("р╕кр╣Ир╕Зр╕Вр╣Йр╕нр╕бр╕╣р╕ер╣Др╕бр╣Ир╕кр╕│р╣Ар╕гр╣Зр╕И тЭМ");
    console.error(err);
  });
}

function backToLine(){
  if (liff.isInClient()) {
    liff.closeWindow();
  } else {
    window.location.href = "index.html";
  }
}
</script>
<script src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>
<script>
liff.init({ liffId: "2008850608-gCaJNTgd" });
</script>


</body>
</html>
